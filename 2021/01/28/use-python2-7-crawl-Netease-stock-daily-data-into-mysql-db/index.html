<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/blogs/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blogs/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blogs/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/blogs/images/logo.svg" color="#222">

<link rel="stylesheet" href="/blogs/css/main.css">


<link rel="stylesheet" href="/blogs/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"haijiaogao.github.io","root":"/blogs/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="起因唱老师最近研究股票和基金，每日盯着手机几个金融软件，有天突发其想给我提了个需求：是否有抓取某几只股票一段时间内的股票数据的接口？我想了想，查了查，网上好多人都这么干过。于是翻了几篇帖子和github上一些开源的库，开搞。 准备 数据其实可以存成csv的文件，后期可以用python的pandas软件进行数据分析，但是我因为对python了解的不太多，还是从自己熟悉的存到数据库入手，但是，其实差不">
<meta property="og:type" content="article">
<meta property="og:title" content="用python爬取网易金融股票每日数据并存入MySql数据库">
<meta property="og:url" content="http://haijiaogao.github.io/blogs/2021/01/28/use-python2-7-crawl-Netease-stock-daily-data-into-mysql-db/">
<meta property="og:site_name" content="Haijiao&#39;s Notes">
<meta property="og:description" content="起因唱老师最近研究股票和基金，每日盯着手机几个金融软件，有天突发其想给我提了个需求：是否有抓取某几只股票一段时间内的股票数据的接口？我想了想，查了查，网上好多人都这么干过。于是翻了几篇帖子和github上一些开源的库，开搞。 准备 数据其实可以存成csv的文件，后期可以用python的pandas软件进行数据分析，但是我因为对python了解的不太多，还是从自己熟悉的存到数据库入手，但是，其实差不">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-01-28T10:01:12.815Z">
<meta property="article:modified_time" content="2021-01-28T11:00:50.610Z">
<meta property="article:author" content="Gaohaijiao">
<meta property="article:tag" content="python">
<meta property="article:tag" content="mysql">
<meta property="article:tag" content="ubuntu">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://haijiaogao.github.io/blogs/2021/01/28/use-python2-7-crawl-Netease-stock-daily-data-into-mysql-db/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>用python爬取网易金融股票每日数据并存入MySql数据库 | Haijiao's Notes</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/blogs/atom.xml" title="Haijiao's Notes" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blogs/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Haijiao's Notes</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">生活杂谈|技术随想</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/blogs/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blogs/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/blogs/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/blogs/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://haijiaogao.github.io/blogs/2021/01/28/use-python2-7-crawl-Netease-stock-daily-data-into-mysql-db/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blogs/images/avatar.gif">
      <meta itemprop="name" content="Gaohaijiao">
      <meta itemprop="description" content="成年人的世界，没有容易二字">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haijiao's Notes">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          用python爬取网易金融股票每日数据并存入MySql数据库
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-01-28 18:01:12 / 修改时间：19:00:50" itemprop="dateCreated datePublished" datetime="2021-01-28T18:01:12+08:00">2021-01-28</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h1><p>唱老师最近研究股票和基金，每日盯着手机几个金融软件，有天突发其想给我提了个需求：是否有抓取某几只股票一段时间内的股票数据的接口？我想了想，查了查，网上好多人都这么干过。于是翻了几篇帖子和github上一些开源的库，开搞。</p>
<h1 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h1><blockquote>
<p>数据其实可以存成csv的文件，后期可以用python的pandas软件进行数据分析，但是我因为对python了解的不太多，还是从自己熟悉的存到数据库入手，但是，其实差不多。但是存到数据库会有更多的坑需要一一去趟。</p>
</blockquote>
<ol>
<li>ubuntu 安装mysql-server以及相关包，并配置 mysql<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install mysql-server</span><br><span class="line">sudo apt-get install python-mysqldb</span><br><span class="line">sudo apt-get install libmysqlclient-dev </span><br></pre></td></tr></table></figure>
其中第一个<code>mysql-server</code>装完了之后，就可以对mysql数据库进行配置，具体配置步骤如链接：<a href="'https://www.digitalocean.com/community/tutorials/how-to-install-mysql-on-ubuntu-18-04'">DegitalOcean</a></li>
</ol>
<p>后面两个都是为了python连接mysql数据库用的。</p>
<ol start="2">
<li><p>python 安装相关包</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pip install beautifulsoup4</span><br><span class="line">pip install requests</span><br><span class="line">pip install lxml</span><br><span class="line">pip install MySQL-python</span><br><span class="line">pip install mysql-connector-python</span><br></pre></td></tr></table></figure>
<p> 2.1 使用python venv环境模拟python2.7环境，进行开发<br>由于python2.7 的版本已经不再维护了，所以在使用pip下载包的时候会频繁的报如下错误：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Python 2.7 reached the end of its life on January 1st, 2020. Please upgrade your Python as Python 2.7 is no longer maintained. pip 21.0 will drop support for Python 2.7 in January 2021. More details about Python 2 support in pip can be found at https:&#x2F;&#x2F;pip.pypa.io&#x2F;en&#x2F;latest&#x2F;development&#x2F;release-process&#x2F;#python-2-support pip 21.0 will remove support for this functionality</span><br></pre></td></tr></table></figure>
<p>所以使用了<a href="'https://docs.python.org/3/tutorial/venv.html'">venv</a>,这样就可以方便的使用pip了，同时还可以分离开项目的依赖和系统python环境的依赖。<br> 2.2 pyCharm社区版安装<br>PyCharm社区版<code>https://www.jetbrains.com/pycharm/download/#section=linux</code></p>
</li>
</ol>
<h1 id="网易股票数据接口"><a href="#网易股票数据接口" class="headerlink" title="网易股票数据接口"></a>网易股票数据接口</h1><p>非常简单，大概是这样事儿的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url&#x3D; &#39;http:&#x2F;&#x2F;quotes.money.163.com&#x2F;trade&#x2F;lsjysj_&#39; + 股票代码 + &#39;.html?year&#x3D;&#39; + 年份（2020） + &#39;&amp;season&#x3D;&#39; + 季度（1,2,3,4）</span><br></pre></td></tr></table></figure>
<p>返回的是一个html的页面，里面包含数据表格，需要使用python request模拟请求，并用beautifulSoup处理html，把数据整出来，存到mysql数据库中。</p>
<p>这里基本上是抄的别人的，没有什么技术难点，难点或许是在于对mysql数据库的操作上。但是也并不很复杂。</p>
<p>项目地址：<a href="'https://github.com/haijiaogao/stockDemo.git'">Github:</a></p>
<h1 id="TODo"><a href="#TODo" class="headerlink" title="TODo"></a>TODo</h1><p>项目仅仅实现了数据导入的功能，后续还有很多目标：</p>
<ol>
<li>数据Web展示</li>
<li>唱老师说需要知道某只股票的市值信息，以及盈利数据信息。<br>看了一下，接口都有，可以取到数据，难点在于接口很多，对于业务不了解的情况来说需要辨别那些是真的有用的那些是无用的。此处感觉更复杂。</li>
<li>数据分析 </li>
</ol>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/blogs/tags/python/" rel="tag"># python</a>
              <a href="/blogs/tags/mysql/" rel="tag"># mysql</a>
              <a href="/blogs/tags/ubuntu/" rel="tag"># ubuntu</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/blogs/2021/01/20/efforts-of-2021-1th/" rel="prev" title="2021年1月摸鱼计划">
      <i class="fa fa-chevron-left"></i> 2021年1月摸鱼计划
    </a></div>
      <div class="post-nav-item">
    <a href="/blogs/2021/02/23/Android-Knowledge-Interview/" rel="next" title="Android Knowledge&Interview">
      Android Knowledge&Interview <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%B5%B7%E5%9B%A0"><span class="nav-number">1.</span> <span class="nav-text">起因</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%87%86%E5%A4%87"><span class="nav-number">2.</span> <span class="nav-text">准备</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BD%91%E6%98%93%E8%82%A1%E7%A5%A8%E6%95%B0%E6%8D%AE%E6%8E%A5%E5%8F%A3"><span class="nav-number">3.</span> <span class="nav-text">网易股票数据接口</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#TODo"><span class="nav-number">4.</span> <span class="nav-text">TODo</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Gaohaijiao</p>
  <div class="site-description" itemprop="description">成年人的世界，没有容易二字</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blogs/archives/">
        
          <span class="site-state-item-count">8</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/blogs/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/blogs/tags/">
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/haijiaogao" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;haijiaogao" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:haijiaogao1988@163.com" title="E-Mail → mailto:haijiaogao1988@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">gaohaijiao</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/blogs/lib/anime.min.js"></script>
  <script src="/blogs/lib/velocity/velocity.min.js"></script>
  <script src="/blogs/lib/velocity/velocity.ui.min.js"></script>

<script src="/blogs/js/utils.js"></script>

<script src="/blogs/js/motion.js"></script>


<script src="/blogs/js/schemes/pisces.js"></script>


<script src="/blogs/js/next-boot.js"></script>




  















  

  

</body>
</html>
